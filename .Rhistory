q()
?unzip
levels(rawdata$EVTYPE)
url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
setInternet2(use = TRUE)
download.file(url, "repdata-data-StormData.csv")
rawdata <- read.csv("repdata-data-StormData.csv")
rawdata$EVTYPE[grep("HIGH SURF", rawdata$EVTYPE)] <- "HIGH SURF"
rawdata$EVTYPE[grep("HEAVY SURF", rawdata$EVTYPE, ignore.case = TRUE)] <-
"HEAVY SURF"
rawdata$EVTYPE[grep("RIP CURRENT", rawdata$EVTYPE)] <- "RIP CURRENT"
# "Burst" included under Thunderstorm Wind per 7.39.1 of NWSI 10-1605
# According to the remarks column, all EVTYPE's beginning with SUMMARY were
# related to thunderstorms.
toMatch <- c("THUNDERSTORM WIND", "THUNDERSTORMS WIND",
"THUDERSTORM WINDS", "THUNDEERSTORM WINDS",
"THUNDERESTORM WINDS", "THUNDERSTORM  WINDS",
"THUNDERSTORM W INDS", "THUNDERSTORM WINS",
"THUNDERSTORMW WINDS", "THUNDERSTORMWINDS",
"THUNDERSTROM WIND", "THUNDERSTROM WINDS",
"THUNDERTORM WINDS", "THUNDERTSORM WIND",
"THUNDESTORM WINDS", "THUNERSTORM WINDS", "BURST",
"TUNDERSTORM WIND", "^Summary", "^TSTM", "^ TSTM")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "THUNDERSTORM WIND"
rawdata$EVTYPE[grep("^FLASH", rawdata$EVTYPE)] <- "FLASH FLOOD"
rawdata$EVTYPE[grep("^FLOOD", rawdata$EVTYPE)] <- "FLOOD"
rawdata$EVTYPE[grep("WILD", rawdata$EVTYPE)] <- "WILDFIRE"
lightningmatch <- c("^LIGHTNING", "^ LIGHTNING", "RED FLAG CRITERIA",
"LIGNTNING")
rawdata$EVTYPE[grep(paste(lightningmatch, collapse = "|"), rawdata$EVTYPE)] <-
"LIGHTNING"
rawdata$EVTYPE[grep("^HAIL", rawdata$EVTYPE)] <- "HAIL"
toMatch <- c("DUST DEVIL", "DUST DEVEL")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "DUST DEVIL"
rawdata$EVTYPE[grep("VOLCANIC", rawdata$EVTYPE, ignore.case = TRUE)] <-
"VOLCANIC ASH"
rawdata$EVTYPE[grep("^HEAVY SNOW", rawdata$EVTYPE, ignore.case = TRUE)] <-
"HEAVY SNOW"
rawdata$EVTYPE[grep("HURRICANE", rawdata$EVTYPE, ignore.case = TRUE)] <-
"HURRICANE/TYPHOON"
toMatch <- c("^WATERSPOUT", "^ WATERSPOUT", "WAYTERSPOUT",
"WATER SPOUT", "LANDSPOUT")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "WATERSPOUT"
toMatch <- c("DENSEFOG", "^FOG")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "DENSE FOG"
toMatch <- c("FREEZING FOG", "ICE FOG")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "FREEZING FOG"
toMatch <- c("^HEAVY RAIN", "LOCALLY HEAVY RAIN", "TSTM HEAVY RAIN")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "HEAVY RAIN"
# "Freezing drizzle" included under Winter Weather per 7.48 of NWSI 10-1605
# Also assuming that "Wintry" falls under this category
toMatch <- c("WINTER WEATHER", "FREEZING DRIZZLE", "WINTERY", "WINTRY",
"WINTER MIX")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "WINTER WEATHER"
rawdata$EVTYPE[grep("TROPICAL STORM", rawdata$EVTYPE, ignore.case = TRUE)] <-
"TROPICAL STORM"
# "Freezing rain" included under Winter Storm per 7.47 of NWSI 10-1605
# "Light snow" included under Winter Storm per 7.47 of NWSI 10-1605
toMatch <- c("^WINTER STORM", "^FREEZING RAIN", "LIGHT SNOW")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "WINTER STORM"
rawdata$EVTYPE[grep("^STRONG WIND", rawdata$EVTYPE, ignore.case = TRUE)] <-
"STRONG WIND"
# Since "High Winds" accompany blizzards, any event type with high wind and
# blizzard in it will be resolved to just "Blizzard"
rawdata$EVTYPE[grep("BLIZZARD", rawdata$EVTYPE, ignore.case = TRUE)] <-
"BLIZZARD"
# Any event type with "Drought" resolved to just "Drought"
rawdata$EVTYPE[grep("DROUGHT", rawdata$EVTYPE, ignore.case = TRUE)] <-
"DROUGHT"
toMatch <- c("EXCESSIVE HEAT", "EXTREME HEAT", "HEAT WAVE", "RECORD HEAT")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "EXCESSIVE HEAT"
# "Unseasonably warm" included under Heat per 7.47 of NWSI 10-1605
toMatch <- c("UNSEASONABLY WARM", "UNSEASONABLY HOT", "HEAT", "VERY WARM",
"HOT", "RECORD WARM")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "HEAT"
toMatch <- c("RECORD COLD", "RECORD  COLD", "WIND CHILL")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "EXTREME COLD/WIND CHILL"
# "Urban flooding" included under Flood per 7.14.4 of NWSI 10-1605
toMatch <- c("URBAN", "STREAM", "^STREET FLOOD")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "FLOOD"
toMatch <- c("COASTAL FLOOD", "COASTALFLOOD")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "COASTAL FLOOD"
toMatch <- c("MARINE MISHAP")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "MARINE STRONG WIND"
toMatch <- c("TORNADO", "TORNDAO")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "TORNADO"
toMatch <- c("STORM SURGE", "^TIDAL")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "STORM SURGE/TIDE"
toMatch <- c("^HIGH WIND", "WND", "WIND ADVISORY")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "HIGH WIND"
toMatch <- c("EARLY FREEZE", "EARLY FROST", "FREEZE", "^FROST")
rawdata$EVTYPE[grep(paste(toMatch, collapse = "|"), rawdata$EVTYPE,
ignore.case = TRUE)] <- "FROST/FREEZE"
rawdata$EVTYPE[grep("^FUNNEL", rawdata$EVTYPE,
ignore.case = TRUE)] <- "FUNNEL CLOUD"
rawdata$EVTYPE <- droplevels(rawdata$EVTYPE)
levels(rawdata$EVTYPE)
setwd("~/R/StatInferCP1")
?qnorm
qnorm(o.95, mean = 1100, sd = 75, lower.tail = FALSE)
qnorm(0.95, mean = 1100, sd = 75, lower.tail = FALSE)
pnorm(0.95, mean = 1100, sd = 75, lower.tail = FALSE)
qnorm(0.95, mean = 1100, sd = 75, lower.tail = TRUE)
ppois(10, lambda = 5*3)
?pbinom
pbinom(4, 5, 0.5, lower.tail = FALSE)
pbinom(4, 5, 0.5, lower.tail = TRUE)
pbinom(3, 5, 0.5, lower.tail = FALSE)
?pnorm
hist(runif(1000))
?runif
mns = NULL
for (i in 1 : 1000) mns = c(mns, mean(runif(40)))
hist(mns)
hist(runif(1000))
rexp(1000, 0.2)
hist(rexp(1000, 0.2))
hist(rexp(40, 0.2))
data  <- data.frame( x = rexp(nosim * 40, lambda))
data  <- data.frame( x = rexp(1000 * 40, 0.2))
averages <- data.frame(x = apply(matrix(data$x,1000),1,mean))
summary(averages)
head(averages)
?ggplot
ggplot(averages)
library(gggplot2)
library(ggplot2)
library(gggplot2)
ggplot(averages)
?ggplot
?hist
set.seed(1234)
lambda = 0.2
mns = NULL
for (i in 1:1000)
mns = c(mns, mean(rexp(40, lambda)))
hist(mns)
hist(mns, binwidth = 1)
hist(mns, freq = TRUE)
hist(mns, freq = FALSE)
hist(mns, freq = TRUE)
hist(mns)
hist(mns, freq = FALSE)
install.packages("pandoc")
library(knitr)
